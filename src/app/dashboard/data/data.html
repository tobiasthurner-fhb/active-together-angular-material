<h1>Alle Kurse</h1>
<div class="row justify-content-center">
  <div class="col-12 col-md-10">
    <div class="row header">
      <div class="col">Kurs</div>
      <div class="col">Veranstaltungsort</div>
      <div class="col">Adresse des Veranstaltungsortes</div>
      <div class="col">Öffentlich erreichbar?</div>
      <div class="col">Kursleiter</div>
      <div class="col-3">Alle Termine</div>
    </div>
    @for (course of this.store.courses; track $index) {
      <div class="row border-top align-items-center row-course">
        <div class="col">{{ course.name }}</div>
        <div class="col">{{ course.eventLocation.name }}</div>
        <div class="col">{{ course.eventLocation.address }}</div>
        <div class="col">{{ course.eventLocation.venueByPublicTansport ? 'Ja' : 'Nein' }}</div>
        <div class="col">{{ course.instructor }}</div>
        <div class="col-3">
          <ul>
            @for (date of course.dates; track $index) {
              <li>
                <span>{{ date.begin | date: "MMM dd, yyyy 'um' hh:mm a" }}</span> -
                <span>{{ date.end | date: "MMM dd, yyyy 'um' hh:mm a" }}</span>
              </li>
            }
          </ul>
        </div>
      </div>
    }
  </div>
</div>
<h1>Alle Anmeldungen</h1>
<div class="row justify-content-center">
  <div class="col-12 col-md-10">
    <div class="row header">
      <div class="col">Name</div>
      <div class="col">Geburtsdatum</div>
      <div class="col">Newsletter?</div>
      <div class="col">Kurs</div>
      <div class="col"></div>
    </div>
    @if (this.store.registrations.length === 0) {
      <p class="empty-state">Keine Anmeldungen vorhanden.</p>
    } @else {
      @for (registration of this.pagedRegistrations; track registration.id) {
        <div class="row border-top align-items-center row-registration">
          <div class="col">{{ registration.name }}</div>
          <div class="col">{{ registration.birthdate | date: "dd.MM.yyyy" }}</div>
          <div class="col">{{ registration.newsletter ? 'Ja' : 'Nein' }}</div>
          <div class="col">{{ registration.course?.name }}</div>
          <div class="col">
            <button mat-raised-button color="warn" (click)="this.deleteRegistration(registration.id)"
                    [disabled]="registration.isDeleting">Löschen
            </button>
          </div>
          @if (registration.isDeleting) {
            <div class="row-overlay">
              <mat-progress-spinner mode="indeterminate" diameter="24"></mat-progress-spinner>
            </div>
          }
        </div>
      }
    }
  </div>
</div>
@if (showPagination) {
  <div class="pagination-wrapper">
    <div class="pagination-bar">
      <button mat-button (click)="this.prevPage()" [disabled]="this.pageIndex === 0">Zurück</button>
      <span class="pagination-info">Seite {{ this.currentPage }} von {{ this.totalPages }}</span>
      <button mat-button (click)="this.nextPage()" [disabled]="this.pageIndex >= this.totalPages - 1">Weiter</button>
    </div>

    <div class="page-numbers">
      @for (p of [].constructor(this.totalPages); track $index) {
        <button mat-button (click)="this.goToPage($index + 1)"
                [class.active-page]="this.currentPage === ($index + 1)">{{ $index + 1 }}
        </button>
      }
    </div>
  </div>
}
